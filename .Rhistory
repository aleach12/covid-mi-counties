mutate(cases =
ifelse(geography == "Balance_of_Wayne",
(cases[which(geography == "Detroit City")] +
cases[which(geography == "Balance_of_Wayne")]),
cases),
sq_km = ifelse(geography == "Balance_of_Wayne", (aland + 359279682) / 1000000, sq_km),
cases_per_sq_km = cases / sq_km) %>%
filter(geography != "Detroit City")
county_cases_per_km2_map <-
tm_shape(county_cases_per_km2) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 2, 3, 8),
interval.closure = "right", labels = c("0", ">0 to .1", ".1 to 1", "1 to 2", "2 to 3", "3 to 8")) +
tm_shape(county_cases_per_km2) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
main.title = str_c("Covid Cases Per Square Kilometer\n Through ", max(county_cases_per_km2$date)),
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_save(county_cases_per_km2_map, "graphics/county_cases_per_km2_map.jpeg")
county_april_cases_per_km2 <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum) %>%
mutate(cases_per_sq_km = cases / sq_km)
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 2, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 2", "2 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_deaths <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum)
summary(county_april_deaths)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 80, 90),
interval.closure = "right") +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 80, 100),
interval.closure = "right") +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.5) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_cases_per_km2 <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum) %>%
mutate(cases_per_sq_km = cases / sq_km)
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80", lwd = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80", lwd = 0.1) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.1) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_cases_per_km2 <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum) %>%
mutate(cases_per_sq_km = cases / sq_km)
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
View(county_april_cases_per_km2)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source:", just = "center") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
county_april_deaths_map
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", just = "center") +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", just = [0.5, 0] +
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", just = (0.5, 0) +
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", just = (0.5, 0)) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", just = c(0.5, 0)) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: https://www.michigan.gov/coronavirus/0,9753,7-406-98163_98173---,00.html", position = c(0.5, 0) ) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.5, 0) ) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.5, -0.1) ) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.5, -0.025) ) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, -0.025), size = 0.5) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1000, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1200, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, 0), size = 0.3) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, 0), size = 0.6) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, 0), size = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
county_april_cases_per_km2_map <-
tm_shape(county_april_cases_per_km2) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "cases_per_sq_km", palette = "Blues", breaks = c(-1, 0, .1, 1, 3, 6, 8),
interval.closure = "right", labels = c("0", "up to .1", ".1 to 1", "1 to 3", "3 to 6", "6 to 8")) +
tm_shape(county_april_cases_per_km2) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, 0), size = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Cases Per Square Kilometer By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_cases_per_km2_map, filename="graphics/county_april_cases.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_cases.gif")
county_april_deaths <-
tmp %>%
mutate(geography =
ifelse(geography == "Detroit City", "Balance_of_Wayne", geography)) %>%
group_by(geography, date) %>%
summarise_if(is.numeric, sum)
county_april_deaths_map <-
tm_shape(county_april_deaths) +
tm_facets(along = "date", free.coords = FALSE, nrow = 1, ncol = 1) +
tm_fill(col = "deaths_per_hundred_thousand_residents", palette = "Blues", breaks = c(-1, 0, 1, 5, 10, 30, 60, 90, 100),
interval.closure = "right", labels = c("0", "1", "1 to 5", "5 to 10", "10 to 30", "30 to 60", "60 to 90", "90 to 100")) +
tm_shape(county_april_deaths) +
tm_borders(col = "grey80", lwd = 0.01) +
tm_credits("Source: Michigan Disease Surveillance System and Vital Records", position = c(0.05, 0), size = 0.4) +
tm_layout(legend.title.color = "white",
title = str_c("Covid Deaths Per Hundred Thousand Residents By Date"),
title.bg.color = "white",
main.title.size = 0.9,
main.title.position = "center",
frame = FALSE)
tmap_animation(county_april_deaths_map, filename="graphics/county_april_deaths.gif", width=1200, height = 1500, delay=100, loop = TRUE)
magick::image_read("graphics/county_april_deaths.gif")
